generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model users {
  id         Int        @id @default(autoincrement())
  name       String
  email      String     @unique
  password   String
  role       String
  created_at DateTime   @default(now())
}

model employees {
  id          Int        @id @default(autoincrement())
  photo_url   String?
  nik         String     @unique
  rfid_code   String     @unique
  position    String
  salary      Decimal
  name        String
  department  String
  hire_date   DateTime?
  created_at  DateTime   @default(now())
  updated_at  DateTime   @updatedAt
  deleted_at  DateTime?

  attendances        attendance[]
  scan_logs          scan_logs[]

}
model attendance {
  id           Int        @id @default(autoincrement())
  employee_id  Int
  date         DateTime
  time_in      DateTime?
  time_out     DateTime?
  total_hours  Float?
  created_at   DateTime   @default(now())

  employee     employees  @relation(fields: [employee_id], references: [id], onDelete: Cascade)
  scan_logs    scan_logs[]
}

model scan_logs {
  id            Int         @id @default(autoincrement())
  employee_id   Int
  attendance_id Int?
  timestamp     DateTime
  scan_type     String
  source        String

  employee      employees   @relation(fields: [employee_id], references: [id], onDelete: Cascade)
  attendance    attendance? @relation(fields: [attendance_id], references: [id], onDelete: SetNull)
}
